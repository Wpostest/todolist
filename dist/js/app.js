"use strict";var btnDone=document.querySelector(".todolist__done"),bicepsRight=document.querySelector(".todolist__done-right-biceps"),bicepsLeft=document.querySelector(".todolist__done-left-biceps"),mouseOverAnimation=function(e){bicepsRight.classList.add("biceps-right-over"),bicepsLeft.classList.add("biceps-left-over"),bicepsRight.classList.remove("biceps-right-out"),bicepsLeft.classList.remove("biceps-left-out")},mouseOutAnimation=function(e){bicepsRight.classList.remove("biceps-right-over"),bicepsLeft.classList.remove("biceps-left-over"),bicepsRight.classList.add("biceps-right-out"),bicepsLeft.classList.add("biceps-left-out")};btnDone.addEventListener("mouseover",mouseOverAnimation),btnDone.addEventListener("mouseout",mouseOutAnimation);var btnShowMore=document.querySelector(".todolist__show-more"),todolistPanel=document.querySelector(".todolist"),showMore=function(){btnShowMore.toggleAttribute("isShowing"),1==btnShowMore.hasAttribute("isShowing")?(todolistPanel.style.maxHeight="100%",btnShowMore.textContent="pokaz mniej"):(todolistPanel.style.maxHeight="455px",btnShowMore.textContent="pokaz wiecej")};btnShowMore.addEventListener("click",showMore);var checkCheckboxDone=function(){for(var e=this.id,t=-1,o=0;o<taskCount();o++){if(currentTasks[o].querySelector(".todolist__checkbox-done").id==e){t=o;break}}-1<t&&(this.checked?currentTasks[t].querySelector(".todolist__checkbox-done").checked=!0:currentTasks[t].querySelector(".todolist__checkbox-done").checked=!1),chartRefresh()},loadCheckboxEvent=function(){document.querySelectorAll(".todolist__checkbox-done").forEach(function(e){e.addEventListener("change",checkCheckboxDone)})};loadCheckboxEvent();var currentTasks=[],loadCurrentTasks=function(){document.querySelectorAll(".todolist__task").forEach(function(e,t){currentTasks[t]=e.cloneNode(!0)})},addToCurrentTasks=function(e){currentTasks.push(e.cloneNode(!0))},removeFromCurrentTasks=function(e){for(var t=e.querySelector(".todolist__checkbox-done").id,o=-1,a=0;a<taskCount();a++){if(currentTasks[a].querySelector(".todolist__checkbox-done").id==t){o=a;break}}-1<o&&currentTasks.splice(o,1)};loadCurrentTasks();var deleteTasksBtn=document.querySelector(".todolist__done"),deleteTasks=function(){var e=document.querySelectorAll(".todolist__task .todolist__checkbox-done:checked");0<e.length&&(e.forEach(function(e){removeFromCurrentTasks(e.parentElement),e.parentElement.remove()}),chartRefresh(),realoadTags(),reloadTasks(),loadCheckboxEvent())};deleteTasksBtn.addEventListener("click",deleteTasks);var todolist=document.querySelector(".todolist"),reloadTasks=function(){document.querySelectorAll(".todolist__task").forEach(function(e){e.remove()}),currentTasks.forEach(function(e){todolist.appendChild(e.cloneNode(!0))}),loadCheckboxEvent()},input=document.querySelector(".todolist__search"),searchingTask=function(e){var s=this.value.toLowerCase(),c=this.value.length;if(""==this.value)return reloadTasks();if(0<currentTasks.length){for(;todolist.lastElementChild instanceof HTMLLIElement;)todolist.removeChild(todolist.lastElementChild);var t=currentTasks.map(function(e){return e.cloneNode(!0)});0<(t=t.filter(function(e){return e.querySelector(".todolist__task-text").textContent.toLowerCase().includes(s)})).length&&t.forEach(function(e){for(var t=e.querySelector(".todolist__task-text"),o=t.textContent,a=t.textContent.length,n="",r=0;r<a;r++)o.substring(r,r+c).toLowerCase()==s&&0<c?(n+="<span class='text-active'>"+o.substring(r,r+c)+"</span>",r+=c-1):n+=o[r];t.innerHTML=n,todolist.appendChild(e)}),loadCheckboxEvent()}};input.addEventListener("input",searchingTask),input.addEventListener("keydown",function(e){13==e.keyCode&&(e.preventDefault(),e.stopPropagation())});var taskCount=function(){return currentTasks.length},taskDoneCount=function(){var t=0;return currentTasks.forEach(function(e){e.querySelector(".todolist__checkbox-done").checked&&t++}),t},realoadTags=function(){var e=document.querySelectorAll(".todolist__task");0<e.length&&(e.forEach(function(e,t){var o=e.querySelector(".todolist_task-label"),a=e.querySelector(".todolist__checkbox-done");o.htmlFor="task-"+(t+1),a.id="task-"+(t+1)}),currentTasks.forEach(function(e,t){var o=e.querySelector(".todolist_task-label"),a=e.querySelector(".todolist__checkbox-done");o.htmlFor="task-"+(t+1),a.id="task-"+(t+1)}))},formAddTask=document.querySelector(".todolist__form-add-task"),todoList=document.querySelector(".todolist"),createTask=function(e){var t=document.createElement("li");t.className="todolist__task";var o=document.createElement("label");o.htmlFor="task-"+(taskCount()+1),o.className="todolist_task-label";var a=document.createElement("input");a.type="checkbox",a.className="todolist__checkbox-done",a.id="task-"+(taskCount()+1);var n=document.createElement("span");n.className="todolist__task-text",n.textContent=e;var r=document.createElement("input");r.type="checkbox",r.className="todolist__checkbox-star";var s=document.createElement("div");return s.className="checbox-done_background_animation",t.appendChild(o),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(s),t},addTask=function(){event.preventDefault(),event.stopPropagation();var e=event.target.querySelector(".todolist__add-task");if(""!==e.value){var t=createTask(e.value);e.value="",chartRefresh(),addToCurrentTasks(t),reloadTasks(),loadCheckboxEvent()}};formAddTask.addEventListener("submit",addTask);var chart=document.querySelector(".todolist__line-done-percentage"),taskDoneNumerDisplay=document.querySelector(".todolist__count-done-task"),allTaskNumberDisplay=document.querySelector(".todolist__count-all-task"),chartRefresh=function(){var e=taskCount(),t=taskDoneCount(),o=t/e*100;taskDoneNumerDisplay.textContent=t,allTaskNumberDisplay.textContent=e,chart.style.background=taskCount<=0?"linear-gradient(to right, #68d391 0%, #68d391 0%, #dadada 0%, #dadada 100%)":"linear-gradient(to right, #68d391 0%, #68d391 ".concat(o,"%, #dadada ").concat(o,"%, #dadada 100%)")};chartRefresh();var dateDisplay=document.querySelector(".todolist__current-time");function formatDate(e){var t=e.getDate(),o=e.getMonth();return["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"][e.getDay()]+" "+t+" "+["Stycznia","Luty","Marca","Kwietnia","Maja","Czerwca","Lipca","Sierpnia","Wrzesienia","Października","Listopada","Grudnia"][o]}dateDisplay.textContent=formatDate(new Date),setInterval(function(){dateDisplay.textContent=formatDate(new Date)},6e4);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2FwcC5qcyIsImpzL2NvbXBvbmVudHMvYmljZXBzLWFuaW1hdGlvbi5qcyIsImpzL2NvbXBvbmVudHMvYnRuLXNob3ctbW9yZS5qcyIsImpzL2NvbXBvbmVudHMvY2hlY2stY2hlY2tib3gtZG9uZS5qcyIsImpzL2NvbXBvbmVudHMvY3VycmVudC10YXNrcy1hcnJheS5qcyIsImpzL2NvbXBvbmVudHMvZGVsZXRlLXRhc2tzLmpzIiwianMvY29tcG9uZW50cy9yZWxvYWRfdGFza3MuanMiLCJqcy9jb21wb25lbnRzL3NlYXJjaC10YXNrLmpzIiwianMvY29tcG9uZW50cy90YXNrcy1jb3VudC5qcyIsImpzL2NvbXBvbmVudHMvdGFza19yZWxvYWRfdGFncy5qcyIsImpzL2NvbXBvbmVudHMvdG9kb2xpc3RfYWRkX3Rhc2suanMiLCJqcy9jb21wb25lbnRzL3RvZG9saXN0X2NoYXJ0LmpzIiwianMvY29tcG9uZW50cy90b2RvbGlzdF9kYXRlLmpzIl0sIm5hbWVzIjpbImJ0bkRvbmUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJiaWNlcHNSaWdodCIsImJpY2Vwc0xlZnQiLCJtb3VzZU92ZXJBbmltYXRpb24iLCJlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibW91c2VPdXRBbmltYXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiYnRuU2hvd01vcmUiLCJ0b2RvbGlzdFBhbmVsIiwic2hvd01vcmUiLCJ0b2dnbGVBdHRyaWJ1dGUiLCJoYXNBdHRyaWJ1dGUiLCJzdHlsZSIsIm1heEhlaWdodCIsInRleHRDb250ZW50IiwiY2hlY2tDaGVja2JveERvbmUiLCJpZEVsZW1lbnQiLCJ0aGlzIiwiaWQiLCJpbmRleCIsImkiLCJ0YXNrQ291bnQiLCJjdXJyZW50VGFza3MiLCJjaGVja2VkIiwiY2hhcnRSZWZyZXNoIiwibG9hZENoZWNrYm94RXZlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIml0ZW0iLCJsb2FkQ3VycmVudFRhc2tzIiwiY2xvbmVOb2RlIiwiYWRkVG9DdXJyZW50VGFza3MiLCJ0YXNrIiwicHVzaCIsInJlbW92ZUZyb21DdXJyZW50VGFza3MiLCJ0YXNrTnVtYmVyIiwic3BsaWNlIiwiZGVsZXRlVGFza3NCdG4iLCJkZWxldGVUYXNrcyIsImFsbFRhc2tDaGVja2VkIiwibGVuZ3RoIiwicGFyZW50RWxlbWVudCIsInJlYWxvYWRUYWdzIiwicmVsb2FkVGFza3MiLCJ0b2RvbGlzdCIsImFwcGVuZENoaWxkIiwiaW5wdXQiLCJzZWFyY2hpbmdUYXNrIiwiZXZlbnQiLCJpbnB1dFRleHQiLCJ2YWx1ZSIsInRvTG93ZXJDYXNlIiwiaW5wdXRUZXh0TGVuZ3RoIiwibGFzdEVsZW1lbnRDaGlsZCIsIkhUTUxMSUVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImZpbHRyZWRUYXNrcyIsIm1hcCIsImZpbHRlciIsImluY2x1ZGVzIiwidGFza1RleHRFbGVtZW50IiwidGFza1RleHQiLCJ0YXNrVGV4dExlbmd0aCIsInRhc2tUZXh0SHRtbCIsInN1YnN0cmluZyIsImlubmVySFRNTCIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRhc2tEb25lQ291bnQiLCJjb3VudCIsInRhc2tzIiwibGFiZWwiLCJodG1sRm9yIiwiZm9ybUFkZFRhc2siLCJ0b2RvTGlzdCIsImNyZWF0ZVRhc2siLCJpbnB1dFZhbHVlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImNoZWNrYm94RG9uZSIsInR5cGUiLCJjaGVja2JveFN0YXIiLCJiYWNrZ3JvdW5kQW5pbWF0aW9uIiwiYWRkVGFzayIsInRhcmdldCIsImNoYXJ0IiwidGFza0RvbmVOdW1lckRpc3BsYXkiLCJhbGxUYXNrTnVtYmVyRGlzcGxheSIsInRhc2tEb25lIiwidGFza0RvbmVQZXJjZW50YWdlIiwiYmFja2dyb3VuZCIsImNvbmNhdCIsImRhdGVEaXNwbGF5IiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJkYXkiLCJnZXREYXRlIiwibW9udGhJ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QUFZLE9BQVEsVUFBVyxRQUMvQixXQUFZLGFBQWMsZUFDMUIsWUFBYSxXQU8yQ0UsR0FHOURMLFlBQVkvRSxZQUFjZ0YsV0FBVyxJQUFJTyxNQUV6Q0MsWUFBWSxXQUNSVCxZQUFZL0UsWUFBY2dGLFdBQVcsSUFBSU8sT0FDMUMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIiwiY29uc3QgYnRuRG9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvbGlzdF9fZG9uZScpO1xyXG5jb25zdCBiaWNlcHNSaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvbGlzdF9fZG9uZS1yaWdodC1iaWNlcHMnKTtcclxuY29uc3QgYmljZXBzTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvbGlzdF9fZG9uZS1sZWZ0LWJpY2VwcycpO1xyXG5cclxuY29uc3QgbW91c2VPdmVyQW5pbWF0aW9uID0gKGUpID0+e1xyXG4gICAgYmljZXBzUmlnaHQuY2xhc3NMaXN0LmFkZCgnYmljZXBzLXJpZ2h0LW92ZXInKTtcclxuICAgIGJpY2Vwc0xlZnQuY2xhc3NMaXN0LmFkZCgnYmljZXBzLWxlZnQtb3ZlcicpO1xyXG4gICAgYmljZXBzUmlnaHQuY2xhc3NMaXN0LnJlbW92ZSgnYmljZXBzLXJpZ2h0LW91dCcpO1xyXG4gICAgYmljZXBzTGVmdC5jbGFzc0xpc3QucmVtb3ZlKCdiaWNlcHMtbGVmdC1vdXQnKTtcclxufVxyXG5cclxuY29uc3QgbW91c2VPdXRBbmltYXRpb24gPSAoZSkgPT57XHJcbiAgICBiaWNlcHNSaWdodC5jbGFzc0xpc3QucmVtb3ZlKCdiaWNlcHMtcmlnaHQtb3ZlcicpO1xyXG4gICAgYmljZXBzTGVmdC5jbGFzc0xpc3QucmVtb3ZlKCdiaWNlcHMtbGVmdC1vdmVyJyk7XHJcbiAgICBiaWNlcHNSaWdodC5jbGFzc0xpc3QuYWRkKCdiaWNlcHMtcmlnaHQtb3V0Jyk7XHJcbiAgICBiaWNlcHNMZWZ0LmNsYXNzTGlzdC5hZGQoJ2JpY2Vwcy1sZWZ0LW91dCcpO1xyXG59XHJcblxyXG5idG5Eb25lLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIG1vdXNlT3ZlckFuaW1hdGlvbik7XHJcbmJ0bkRvbmUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBtb3VzZU91dEFuaW1hdGlvbik7IiwiY29uc3QgYnRuU2hvd01vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb2xpc3RfX3Nob3ctbW9yZScpO1xyXG5jb25zdCB0b2RvbGlzdFBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9saXN0Jyk7XHJcblxyXG5cclxuY29uc3Qgc2hvd01vcmUgPSAoKSA9PntcclxuICAgIGJ0blNob3dNb3JlLnRvZ2dsZUF0dHJpYnV0ZShcImlzU2hvd2luZ1wiKTtcclxuICAgIGlmKGJ0blNob3dNb3JlLmhhc0F0dHJpYnV0ZShcImlzU2hvd2luZ1wiKSA9PSB0cnVlKXtcclxuICAgICAgICB0b2RvbGlzdFBhbmVsLnN0eWxlLm1heEhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGJ0blNob3dNb3JlLnRleHRDb250ZW50ID0gXCJwb2theiBtbmllalwiO1xyXG4gICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgdG9kb2xpc3RQYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSBcIjQ1NXB4XCI7XHJcbiAgICAgICAgYnRuU2hvd01vcmUudGV4dENvbnRlbnQgPSBcInBva2F6IHdpZWNlalwiO1xyXG4gICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBcIjEwMHZoXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG59XHJcblxyXG5idG5TaG93TW9yZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dNb3JlKTsiLCJjb25zdCBjaGVja0NoZWNrYm94RG9uZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCBpZEVsZW1lbnQgPSB0aGlzLmlkO1xyXG4gICAgbGV0IGluZGV4ID0gLTE7XHJcbiAgICBcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0YXNrQ291bnQoKTsgaSsrKXtcclxuICAgICAgICBjb25zdCBjdXJyZW50VGFza0NoZWNrYm94ID0gY3VycmVudFRhc2tzW2ldLnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RfX2NoZWNrYm94LWRvbmVcIikuaWQ7XHJcblxyXG4gICAgICAgIGlmKGN1cnJlbnRUYXNrQ2hlY2tib3ggPT0gaWRFbGVtZW50KXtcclxuICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICBicmVhazsgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKGluZGV4ID4gLTEpe1xyXG4gICAgICAgIGlmKHRoaXMuY2hlY2tlZCl7XHJcbiAgICAgICAgICAgIGN1cnJlbnRUYXNrc1tpbmRleF0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fY2hlY2tib3gtZG9uZVwiKS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY3VycmVudFRhc2tzW2luZGV4XS5xdWVyeVNlbGVjdG9yKFwiLnRvZG9saXN0X19jaGVja2JveC1kb25lXCIpLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hhcnRSZWZyZXNoKCk7XHJcbn1cclxuXHJcbmNvbnN0IGxvYWRDaGVja2JveEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9kb2xpc3RfX2NoZWNrYm94LWRvbmVcIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgY2hlY2tDaGVja2JveERvbmUpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmxvYWRDaGVja2JveEV2ZW50KCk7IiwibGV0IGN1cnJlbnRUYXNrcyA9IFtdO1xyXG5cclxuY29uc3QgbG9hZEN1cnJlbnRUYXNrcyA9IGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCB0YXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9kb2xpc3RfX3Rhc2tcIik7XHJcblxyXG4gICAgdGFza3MuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCl7XHJcbiAgICAgICAgY3VycmVudFRhc2tzW2luZGV4XSA9IGl0ZW0uY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IGFkZFRvQ3VycmVudFRhc2tzID0gZnVuY3Rpb24odGFzayl7XHJcbiAgICBjdXJyZW50VGFza3MucHVzaCh0YXNrLmNsb25lTm9kZSh0cnVlKSk7XHJcbn1cclxuXHJcbmNvbnN0IHJlbW92ZUZyb21DdXJyZW50VGFza3MgPSBmdW5jdGlvbih0YXNrKXtcclxuICAgIGNvbnN0IHRhc2tOdW1iZXIgPSB0YXNrLnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RfX2NoZWNrYm94LWRvbmVcIikuaWQ7XHJcbiAgICBsZXQgaW5kZXggPSAtMTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGFza0NvdW50KCk7IGkrKyl7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tOdW1iZXIgPSBjdXJyZW50VGFza3NbaV0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fY2hlY2tib3gtZG9uZVwiKS5pZDtcclxuXHJcbiAgICAgICAgaWYoY3VycmVudFRhc2tOdW1iZXIgPT0gdGFza051bWJlcil7XHJcbiAgICAgICAgICAgIGluZGV4ID0gaTtcclxuICAgICAgICAgICAgYnJlYWs7IFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZihpbmRleCA+IC0xKXtcclxuICAgICAgICBjdXJyZW50VGFza3Muc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxufVxyXG5cclxubG9hZEN1cnJlbnRUYXNrcygpO1xyXG5cclxuIiwiY29uc3QgZGVsZXRlVGFza3NCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9saXN0X19kb25lXCIpO1xyXG5cclxuY29uc3QgZGVsZXRlVGFza3MgPSAoKSA9PntcclxuICAgIGNvbnN0IGFsbFRhc2tDaGVja2VkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2RvbGlzdF9fdGFzayAudG9kb2xpc3RfX2NoZWNrYm94LWRvbmU6Y2hlY2tlZFwiKTtcclxuXHJcbiAgICBpZihhbGxUYXNrQ2hlY2tlZC5sZW5ndGggPiAwKXtcclxuICAgICAgICBhbGxUYXNrQ2hlY2tlZC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJlbW92ZUZyb21DdXJyZW50VGFza3MoaXRlbS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgaXRlbS5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNoYXJ0UmVmcmVzaCgpO1xyXG4gICAgICAgIHJlYWxvYWRUYWdzKCk7XHJcbiAgICAgICAgcmVsb2FkVGFza3MoKTtcclxuICAgICAgICBsb2FkQ2hlY2tib3hFdmVudCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5kZWxldGVUYXNrc0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlVGFza3MpO1xyXG5cclxuIiwiY29uc3QgdG9kb2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9saXN0XCIpO1xyXG5cclxuY29uc3QgcmVsb2FkVGFza3MgPSBmdW5jdGlvbigpe1xyXG4gICAgY29uc3QgdGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvZG9saXN0X190YXNrXCIpO1xyXG5cclxuICAgIHRhc2tzLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgaXRlbS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGN1cnJlbnRUYXNrcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgIHRvZG9saXN0LmFwcGVuZENoaWxkKGl0ZW0uY2xvbmVOb2RlKHRydWUpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxvYWRDaGVja2JveEV2ZW50KCk7XHJcbn0iLCJjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RfX3NlYXJjaFwiKTtcclxuXHJcbmNvbnN0IHNlYXJjaGluZ1Rhc2sgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgICBjb25zdCBpbnB1dFRleHQgPSB0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCBpbnB1dFRleHRMZW5ndGggPSB0aGlzLnZhbHVlLmxlbmd0aDtcclxuXHJcbiAgICBpZih0aGlzLnZhbHVlID09IFwiXCIpe1xyXG4gICAgICAgIHJldHVybiByZWxvYWRUYXNrcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGN1cnJlbnRUYXNrcy5sZW5ndGggPiAwKXtcclxuICAgICAgICB3aGlsZSh0b2RvbGlzdC5sYXN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTExJRWxlbWVudCl7XHJcbiAgICAgICAgICAgIHRvZG9saXN0LnJlbW92ZUNoaWxkKHRvZG9saXN0Lmxhc3RFbGVtZW50Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpbHRyZWRUYXNrcyA9IGN1cnJlbnRUYXNrcy5tYXAoZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZmlsdHJlZFRhc2tzID0gZmlsdHJlZFRhc2tzLmZpbHRlcihmdW5jdGlvbihpdGVtKXsgXHJcbiAgICAgICAgICAgIGNvbnN0IHRhc2tUZXh0RWxlbWVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fdGFzay10ZXh0XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFza1RleHRFbGVtZW50LnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoaW5wdXRUZXh0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYoZmlsdHJlZFRhc2tzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBmaWx0cmVkVGFza3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUZXh0RWxlbWVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fdGFzay10ZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1RleHQgPSB0YXNrVGV4dEVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrVGV4dExlbmd0aCA9IHRhc2tUZXh0RWxlbWVudC50ZXh0Q29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFza1RleHRIdG1sID0gXCJcIjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRhc2tUZXh0TGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRhc2tUZXh0LnN1YnN0cmluZyhpLCBpICsgaW5wdXRUZXh0TGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09IGlucHV0VGV4dCAmJiAgaW5wdXRUZXh0TGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUZXh0SHRtbCArPSBcIjxzcGFuIGNsYXNzPSd0ZXh0LWFjdGl2ZSc+XCIgKyB0YXNrVGV4dC5zdWJzdHJpbmcoaSwgaSArIGlucHV0VGV4dExlbmd0aCkgKyBcIjwvc3Bhbj5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSArPSBpbnB1dFRleHRMZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGV4dEh0bWwgKz0gdGFza1RleHRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhc2tUZXh0RWxlbWVudC5pbm5lckhUTUwgPSB0YXNrVGV4dEh0bWw7XHJcbiAgICAgICAgICAgICAgICB0b2RvbGlzdC5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2FkQ2hlY2tib3hFdmVudCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgc2VhcmNoaW5nVGFzayk7XHJcblxyXG5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKXtcclxuICAgIGlmKGUua2V5Q29kZSA9PSAxMyl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuIiwiY29uc3QgdGFza0NvdW50ID0gKCkgPT57XHJcbiAgICByZXR1cm4gY3VycmVudFRhc2tzLmxlbmd0aDtcclxufVxyXG5cclxuY29uc3QgdGFza0RvbmVDb3VudCA9ICgpID0+e1xyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuXHJcbiAgICBjdXJyZW50VGFza3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICBjb25zdCBjaGVja2JveCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fY2hlY2tib3gtZG9uZVwiKTtcclxuXHJcbiAgICAgICAgaWYoY2hlY2tib3guY2hlY2tlZCl7XHJcbiAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gY291bnQ7XHJcbn0iLCJjb25zdCByZWFsb2FkVGFncyA9ICgpID0+e1xyXG4gICAgY29uc3QgdGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvZG9saXN0X190YXNrXCIpO1xyXG5cclxuICAgIGlmKHRhc2tzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgIHRhc2tzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLnRvZG9saXN0X3Rhc2stbGFiZWxcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLnRvZG9saXN0X19jaGVja2JveC1kb25lXCIpO1xyXG4gICAgICAgICAgICBsYWJlbC5odG1sRm9yID0gXCJ0YXNrLVwiICsgKGluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgIGlucHV0LmlkID0gXCJ0YXNrLVwiICsgKGluZGV4ICsgMSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGN1cnJlbnRUYXNrcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF90YXNrLWxhYmVsXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fY2hlY2tib3gtZG9uZVwiKTtcclxuICAgICAgICAgICAgbGFiZWwuaHRtbEZvciA9IFwidGFzay1cIiArIChpbmRleCArIDEpO1xyXG4gICAgICAgICAgICBpbnB1dC5pZCA9IFwidGFzay1cIiArIChpbmRleCArIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiY29uc3QgZm9ybUFkZFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb2xpc3RfX2Zvcm0tYWRkLXRhc2snKTtcclxuY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb2xpc3QnKTtcclxuXHJcbmNvbnN0IGNyZWF0ZVRhc2sgPSAoaW5wdXRWYWx1ZSkgPT57XHJcbiAgICBjb25zdCB0YXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgIHRhc2suY2xhc3NOYW1lID0gXCJ0b2RvbGlzdF9fdGFza1wiO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgIGxhYmVsLmh0bWxGb3IgPSBcInRhc2stXCIgKyAodGFza0NvdW50KCkgKyAxKTtcclxuICAgIGxhYmVsLmNsYXNzTmFtZSA9IFwidG9kb2xpc3RfdGFzay1sYWJlbFwiO1xyXG5cclxuICAgIGNvbnN0IGNoZWNrYm94RG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICBjaGVja2JveERvbmUudHlwZSA9IFwiY2hlY2tib3hcIjtcclxuICAgIGNoZWNrYm94RG9uZS5jbGFzc05hbWUgPSBcInRvZG9saXN0X19jaGVja2JveC1kb25lXCI7XHJcbiAgICBjaGVja2JveERvbmUuaWQgPSBcInRhc2stXCIgKyAodGFza0NvdW50KCkgKyAxKTtcclxuXHJcbiAgICBjb25zdCB0YXNrVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgIHRhc2tUZXh0LmNsYXNzTmFtZSA9IFwidG9kb2xpc3RfX3Rhc2stdGV4dFwiO1xyXG4gICAgdGFza1RleHQudGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlO1xyXG5cclxuICAgIGNvbnN0IGNoZWNrYm94U3RhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICBjaGVja2JveFN0YXIudHlwZSA9IFwiY2hlY2tib3hcIjtcclxuICAgIGNoZWNrYm94U3Rhci5jbGFzc05hbWUgPSBcInRvZG9saXN0X19jaGVja2JveC1zdGFyXCI7XHJcblxyXG4gICAgY29uc3QgYmFja2dyb3VuZEFuaW1hdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgYmFja2dyb3VuZEFuaW1hdGlvbi5jbGFzc05hbWUgPSBcImNoZWNib3gtZG9uZV9iYWNrZ3JvdW5kX2FuaW1hdGlvblwiO1xyXG5cclxuICAgIHRhc2suYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gICAgdGFzay5hcHBlbmRDaGlsZChjaGVja2JveERvbmUpO1xyXG4gICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrVGV4dCk7XHJcbiAgICB0YXNrLmFwcGVuZENoaWxkKGNoZWNrYm94U3Rhcik7XHJcbiAgICB0YXNrLmFwcGVuZENoaWxkKGJhY2tncm91bmRBbmltYXRpb24pO1xyXG5cclxuICAgIHJldHVybiB0YXNrO1xyXG59O1xyXG5cclxuY29uc3QgYWRkVGFzayA9ICgpID0+e1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcignLnRvZG9saXN0X19hZGQtdGFzaycpO1xyXG4gICAgaWYoaW5wdXQudmFsdWUgPT09IFwiXCIpeyByZXR1cm47IH07XHJcbiAgICBjb25zdCB0YXNrID0gY3JlYXRlVGFzayhpbnB1dC52YWx1ZSk7XHJcbiAgICAvL3RvZG9MaXN0LmFwcGVuZENoaWxkKHRhc2spO1xyXG4gICAgaW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgY2hhcnRSZWZyZXNoKCk7XHJcbiAgICBhZGRUb0N1cnJlbnRUYXNrcyh0YXNrKTtcclxuICAgIHJlbG9hZFRhc2tzKCk7XHJcbiAgICBsb2FkQ2hlY2tib3hFdmVudCgpO1xyXG59O1xyXG5cclxuZm9ybUFkZFRhc2suYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYWRkVGFzayk7IiwiY29uc3QgY2hhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb2xpc3RfX2xpbmUtZG9uZS1wZXJjZW50YWdlJyk7XHJcbmNvbnN0IHRhc2tEb25lTnVtZXJEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9saXN0X19jb3VudC1kb25lLXRhc2snKTsgXHJcbmNvbnN0IGFsbFRhc2tOdW1iZXJEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9saXN0X19jb3VudC1hbGwtdGFzaycpO1xyXG5cclxuY29uc3QgY2hhcnRSZWZyZXNoID0gKCkgPT4ge1xyXG4gICAgY29uc3QgdGFzayA9IHRhc2tDb3VudCgpO1xyXG4gICAgY29uc3QgdGFza0RvbmUgPSB0YXNrRG9uZUNvdW50KCk7XHJcbiAgICBjb25zdCB0YXNrRG9uZVBlcmNlbnRhZ2UgPSAgdGFza0RvbmUgLyB0YXNrICogMTAwO1xyXG4gICAgdGFza0RvbmVOdW1lckRpc3BsYXkudGV4dENvbnRlbnQgPSB0YXNrRG9uZTtcclxuICAgIGFsbFRhc2tOdW1iZXJEaXNwbGF5LnRleHRDb250ZW50ID0gdGFzaztcclxuXHJcbiAgICBpZih0YXNrQ291bnQgPD0gMCl7XHJcbiAgICAgICAgY2hhcnQuc3R5bGUuYmFja2dyb3VuZCA9IGBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICM2OGQzOTEgMCUsICM2OGQzOTEgMCUsICNkYWRhZGEgMCUsICNkYWRhZGEgMTAwJSlgO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgICBjaGFydC5zdHlsZS5iYWNrZ3JvdW5kID0gYGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzY4ZDM5MSAwJSwgIzY4ZDM5MSAke3Rhc2tEb25lUGVyY2VudGFnZX0lLCAjZGFkYWRhICR7dGFza0RvbmVQZXJjZW50YWdlfSUsICNkYWRhZGEgMTAwJSlgO1xyXG4gICAgfVxyXG4gICAgXHJcbn07XHJcblxyXG5jaGFydFJlZnJlc2goKTsiLCJjb25zdCBkYXRlRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvbGlzdF9fY3VycmVudC10aW1lJyk7XHJcblxyXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcclxuICAgIGNvbnN0IGRheU5hbWVzID0gW1xyXG4gICAgICAgIFwiTmllZHppZWxhXCIsXHJcbiAgICAgICAgXCJQb25pZWR6aWHFgmVrXCIsIFwiV3RvcmVrXCIsXHJcbiAgICAgICAgXCLFmnJvZGFcIiwgXCJDendhcnRla1wiLFxyXG4gICAgICAgIFwiUGnEhXRla1wiLCBcIlNvYm90YVwiXHJcbiAgICBdO1xyXG5cclxuICAgIGNvbnN0IG1vbnRoTmFtZXMgPSBbXHJcbiAgICAgIFwiU3R5Y3puaWFcIiwgXCJMdXR5XCIsIFwiTWFyY2FcIixcclxuICAgICAgXCJLd2lldG5pYVwiLCBcIk1hamFcIiwgXCJDemVyd2NhXCIsIFwiTGlwY2FcIixcclxuICAgICAgXCJTaWVycG5pYVwiLCBcIldyemVzaWVuaWFcIiwgXCJQYcW6ZHppZXJuaWthXCIsXHJcbiAgICAgIFwiTGlzdG9wYWRhXCIsIFwiR3J1ZG5pYVwiXHJcbiAgICBdO1xyXG4gIFxyXG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICBjb25zdCBtb250aEluZGV4ID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgY29uc3QgZGF5SW5kZXggPSBkYXRlLmdldERheSgpO1xyXG4gIFxyXG4gICAgcmV0dXJuICBkYXlOYW1lc1tkYXlJbmRleF0gKyBcIiBcIiArIGRheSArIFwiIFwiICsgbW9udGhOYW1lc1ttb250aEluZGV4XTtcclxufVxyXG5cclxuZGF0ZURpc3BsYXkudGV4dENvbnRlbnQgPSBmb3JtYXREYXRlKG5ldyBEYXRlKCkpO1xyXG5cclxuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuICAgIGRhdGVEaXNwbGF5LnRleHRDb250ZW50ID0gZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKTtcclxufSwgNjAwMDApO1xyXG5cclxuIl19
