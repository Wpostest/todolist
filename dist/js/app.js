"use strict";var btnDone=document.querySelector(".todolist__done"),bicepsRight=document.querySelector(".todolist__done-right-biceps"),bicepsLeft=document.querySelector(".todolist__done-left-biceps"),mouseOverAnimation=function(e){bicepsRight.classList.add("biceps-right-over"),bicepsLeft.classList.add("biceps-left-over"),bicepsRight.classList.remove("biceps-right-out"),bicepsLeft.classList.remove("biceps-left-out")},mouseOutAnimation=function(e){bicepsRight.classList.remove("biceps-right-over"),bicepsLeft.classList.remove("biceps-left-over"),bicepsRight.classList.add("biceps-right-out"),bicepsLeft.classList.add("biceps-left-out")};btnDone.addEventListener("mouseover",mouseOverAnimation),btnDone.addEventListener("mouseout",mouseOutAnimation);var btnShowMore=document.querySelector(".todolist__show-more"),todolistPanel=document.querySelector(".todolist"),showMore=function(){btnShowMore.toggleAttribute("isShowing"),1==btnShowMore.hasAttribute("isShowing")?(todolistPanel.style.maxHeight="100%",btnShowMore.textContent="pokaz mniej"):(todolistPanel.style.maxHeight="455px",btnShowMore.textContent="pokaz wiecej")};btnShowMore.addEventListener("click",showMore);var currentTasks=[],loadCurrentTasks=function(){document.querySelectorAll(".todolist__task").forEach(function(e,t){currentTasks[t]=e.cloneNode(!0)})},addToCurrentTasks=function(e){currentTasks.push(e.cloneNode(!0))},removeFromCurrentTasks=function(e){for(var t=e.querySelector(".todolist__checkbox-done").id,o=-1,a=0;a<taskCount();a++){if(currentTasks[a].querySelector(".todolist__checkbox-done").id==t){o=a;break}}-1<o&&currentTasks.splice(o,1)};loadCurrentTasks();var deleteTasksBtn=document.querySelector(".todolist__done"),deleteTasks=function(){var e=document.querySelectorAll(".todolist__task .todolist__checkbox-done:checked");0<e.length&&(e.forEach(function(e){removeFromCurrentTasks(e.parentElement),e.parentElement.remove()}),chartRefresh(),realoadTags(),reloadTasks())};deleteTasksBtn.addEventListener("click",deleteTasks);var todolist=document.querySelector(".todolist"),reloadTasks=function(){document.querySelectorAll(".todolist__task").forEach(function(e){e.remove()}),currentTasks.forEach(function(e){todolist.appendChild(e.cloneNode(!0))})},input=document.querySelector(".todolist__search"),filtredTasks=[],searchingTask=function(e){var s=this.value.toLowerCase(),i=this.value.length;if(""==this.value)return reloadTasks();if(0<currentTasks.length){for(;todolist.lastElementChild instanceof HTMLLIElement;)todolist.removeChild(todolist.lastElementChild);0<(filtredTasks=(filtredTasks=currentTasks.map(function(e){return e.cloneNode(!0)})).filter(function(e){return e.querySelector(".todolist__task-text").textContent.toLowerCase().includes(s)})).length&&filtredTasks.forEach(function(e){for(var t=e.querySelector(".todolist__task-text"),o=t.textContent,a=t.textContent.length,r="",n=0;n<a;n++)o.substring(n,n+i).toLowerCase()==s&&0<i?(r+="<span class='text-active'>"+o.substring(n,n+i)+"</span>",n+=i-1):r+=o[n];t.textContent=r,todolist.appendChild(e)})}};input.addEventListener("input",searchingTask);var taskCount=function(){return currentTasks.length},realoadTags=function(){var e=document.querySelectorAll(".todolist__task");0<e.length&&(e.forEach(function(e,t){var o=e.querySelector(".todolist_task-label"),a=e.querySelector(".todolist__checkbox-done");o.htmlFor="task-"+(t+1),a.id="task-"+(t+1)}),currentTasks.forEach(function(e,t){var o=e.querySelector(".todolist_task-label"),a=e.querySelector(".todolist__checkbox-done");o.htmlFor="task-"+(t+1),a.id="task-"+(t+1)}))},formAddTask=document.querySelector(".todolist__form-add-task"),todoList=document.querySelector(".todolist"),createTask=function(e){var t=document.createElement("li");t.className="todolist__task";var o=document.createElement("label");o.htmlFor="task-"+(taskCount()+1),o.className="todolist_task-label";var a=document.createElement("input");a.type="checkbox",a.className="todolist__checkbox-done",a.id="task-"+(taskCount()+1),a.addEventListener("change",checboxChangeEvent);var r=document.createElement("span");r.className="todolist__task-text",r.textContent=e;var n=document.createElement("input");n.type="checkbox",n.className="todolist__checkbox-star";var s=document.createElement("div");return s.className="checbox-done_background_animation",t.appendChild(o),t.appendChild(a),t.appendChild(r),t.appendChild(n),t.appendChild(s),t},addTask=function(){event.preventDefault();var e=event.target.querySelector(".todolist__add-task");if(""!==e.value){var t=createTask(e.value);e.value="",chartRefresh(),addToCurrentTasks(t),reloadTasks()}};formAddTask.addEventListener("submit",addTask);var chart=document.querySelector(".todolist__line-done-percentage"),taskDoneNumerDisplay=document.querySelector(".todolist__count-done-task"),allTaskNumberDisplay=document.querySelector(".todolist__count-all-task"),chartRefresh=function(){var e=document.querySelectorAll(".todolist__task").length,t=document.querySelectorAll(".todolist__checkbox-done:checked").length,o=t/e*100;taskDoneNumerDisplay.textContent=t,allTaskNumberDisplay.textContent=e,chart.style.background=e<=0?"linear-gradient(to right, #68d391 0%, #68d391 0%, #dadada 0%, #dadada 100%)":"linear-gradient(to right, #68d391 0%, #68d391 ".concat(o,"%, #dadada ").concat(o,"%, #dadada 100%)")};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}chartRefresh();var checkboxes=_toConsumableArray(document.querySelectorAll(".todolist__checkbox-done")),checboxChangeEvent=function(){chartRefresh()};checkboxes.forEach(function(e){e.addEventListener("change",checboxChangeEvent)});var dateDisplay=document.querySelector(".todolist__current-time");function formatDate(e){var t=e.getDate(),o=e.getMonth();return["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"][e.getDay()]+" "+t+" "+["Stycznia","Luty","Marca","Kwietnia","Maja","Czerwca","Lipca","Sierpnia","Wrzesienia","Października","Listopada","Grudnia"][o]}dateDisplay.textContent=formatDate(new Date),setInterval(function(){dateDisplay.textContent=formatDate(new Date)},6e4);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2FwcC5qcyIsImpzL2NvbXBvbmVudHMvYmljZXBzLWFuaW1hdGlvbi5qcyIsImpzL2NvbXBvbmVudHMvYnRuLXNob3ctbW9yZS5qcyIsImpzL2NvbXBvbmVudHMvY3VycmVudC10YXNrcy1hcnJheS5qcyIsImpzL2NvbXBvbmVudHMvZGVsZXRlLXRhc2tzLmpzIiwianMvY29tcG9uZW50cy9yZWxvYWRfdGFza3MuanMiLCJqcy9jb21wb25lbnRzL3NlYXJjaC10YXNrLmpzIiwianMvY29tcG9uZW50cy90YXNrcy1jb3VudC5qcyIsImpzL2NvbXBvbmVudHMvdGFza19yZWxvYWRfdGFncy5qcyIsImpzL2NvbXBvbmVudHMvdG9kb2xpc3RfYWRkX3Rhc2suanMiLCJqcy9jb21wb25lbnRzL3RvZG9saXN0X2NoYXJ0LmpzIiwianMvY29tcG9uZW50cy90b2RvbGlzdF9jaGVja190YXNrX2V2ZW50LmpzIiwianMvY29tcG9uZW50cy90b2RvbGlzdF9kYXRlLmpzIl0sIm5hbWVzIjpbImJ0bkRvbmUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJiaWNlcHNSaWdodCIsImJpY2Vwc0xlZnQiLCJtb3VzZU92ZXJBbmltYXRpb24iLCJlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibW91c2VPdXRBbmltYXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiYnRuU2hvd01vcmUiLCJ0b2RvbGlzdFBhbmVsIiwic2hvd01vcmUiLCJ0b2dnbGVBdHRyaWJ1dGUiLCJoYXNBdHRyaWJ1dGUiLCJzdHlsZSIsIm1heEhlaWdodCIsInRleHRDb250ZW50IiwiY3VycmVudFRhc2tzIiwibG9hZEN1cnJlbnRUYXNrcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwiY2xvbmVOb2RlIiwiYWRkVG9DdXJyZW50VGFza3MiLCJ0YXNrIiwicHVzaCIsInJlbW92ZUZyb21DdXJyZW50VGFza3MiLCJ0YXNrTnVtYmVyIiwiaWQiLCJpIiwidGFza0NvdW50Iiwic3BsaWNlIiwiZGVsZXRlVGFza3NCdG4iLCJkZWxldGVUYXNrcyIsImFsbFRhc2tDaGVja2VkIiwibGVuZ3RoIiwicGFyZW50RWxlbWVudCIsImNoYXJ0UmVmcmVzaCIsInJlYWxvYWRUYWdzIiwicmVsb2FkVGFza3MiLCJ0b2RvbGlzdCIsImFwcGVuZENoaWxkIiwiaW5wdXQiLCJmaWx0cmVkVGFza3MiLCJzZWFyY2hpbmdUYXNrIiwiZXZlbnQiLCJpbnB1dFRleHQiLCJ0aGlzIiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsImlucHV0VGV4dExlbmd0aCIsImxhc3RFbGVtZW50Q2hpbGQiLCJIVE1MTElFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJtYXAiLCJmaWx0ZXIiLCJpbmNsdWRlcyIsInRhc2tUZXh0RWxlbWVudCIsInRhc2tUZXh0IiwidGFza1RleHRMZW5ndGgiLCJ0YXNrVGV4dEh0bWwiLCJzdWJzdHJpbmciLCJ0YXNrcyIsImxhYmVsIiwiaHRtbEZvciIsImZvcm1BZGRUYXNrIiwidG9kb0xpc3QiLCJjcmVhdGVUYXNrIiwiaW5wdXRWYWx1ZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJjaGVja2JveERvbmUiLCJ0eXBlIiwiY2hlY2JveENoYW5nZUV2ZW50IiwiY2hlY2tib3hTdGFyIiwiYmFja2dyb3VuZEFuaW1hdGlvbiIsImFkZFRhc2siLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsImNoYXJ0IiwidGFza0RvbmVOdW1lckRpc3BsYXkiLCJhbGxUYXNrTnVtYmVyRGlzcGxheSIsInRhc2tEb25lQ291bnQiLCJ0YXNrRG9uZVBlcmNlbnRhZ2UiLCJiYWNrZ3JvdW5kIiwiY29uY2F0IiwiY2hlY2tib3hlcyIsIl90b0NvbnN1bWFibGVBcnJheSIsImVsZW1lbnQiLCJkYXRlRGlzcGxheSIsImZvcm1hdERhdGUiLCJkYXRlIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoSW5kZXgiLCJnZXRNb250aCIsImdldERheSIsIkRhdGUiLCJzZXRJbnRlcnZhbCJdLCJtYXBwaW5ncyI6IkFBQUEsYUNBQSxJQUFNQSxRQUFVQyxTQUFTQyxjQUFjLG1CQUNqQ0MsWUFBY0YsU0FBU0MsY0FBYyxnQ0FDckNFLFdBQWFILFNBQVNDLGNBQWMsK0JBRXBDRyxtQkFBcUIsU0FBQ0MsR0FDeEJILFlBQVlJLFVBQVVDLElBQUkscUJBQzFCSixXQUFXRyxVQUFVQyxJQUFJLG9CQUN6QkwsWUFBWUksVUFBVUUsT0FBTyxvQkFDN0JMLFdBQVdHLFVBQVVFLE9BQU8sb0JBRzFCQyxrQkFBb0IsU0FBQ0osR0FDdkJILFlBQVlJLFVBQVVFLE9BQU8scUJBQzdCTCxXQUFXRyxVQUFVRSxPQUFPLG9CQUM1Qk4sWUFBWUksVUFBVUMsSUFBSSxvQkFDMUJKLFdBQVdHLFVBQVVDLElBQUksb0JBRzdCUixRQUFRVyxpQkFBaUIsWUFBYU4sb0JBQ3RDTCxRQUFRVyxpQkFBaUIsV0FBWUQsbUJDbkJyQyxJQUFNRSxZQUFjWCxTQUFTQyxjQUFjLHdCQUNyQ1csY0FBZ0JaLFNBQVNDLGNBQWMsYUFHdkNZLFNBQVcsV0FDYkYsWUFBWUcsZ0JBQWdCLGFBQ2dCLEdBQXpDSCxZQUFZSSxhQUFhLGNBQ3hCSCxjQUFjSSxNQUFNQyxVQUFZLE9BQ2hDTixZQUFZTyxZQUFjLGdCQUkxQk4sY0FBY0ksTUFBTUMsVUFBWSxRQUNoQ04sWUFBWU8sWUFBYyxpQkFPbENQLFlBQVlELGlCQUFpQixRQUFTRyxVQ3BCdEMsSUFBSU0sYUFBZSxHQUViQyxpQkFBbUIsV0FDUHBCLFNBQVNxQixpQkFBaUIsbUJBRWxDQyxRQUFRLFNBQVNDLEVBQU1DLEdBQ3pCTCxhQUFhSyxHQUFTRCxFQUFLRSxXQUFVLE1BSXZDQyxrQkFBb0IsU0FBU0MsR0FDL0JSLGFBQWFTLEtBQUtELEVBQUtGLFdBQVUsS0FHL0JJLHVCQUF5QixTQUFTRixHQUlwQyxJQUhBLElBQU1HLEVBQWFILEVBQUsxQixjQUFjLDRCQUE0QjhCLEdBQzlEUCxHQUFTLEVBRUxRLEVBQUksRUFBR0EsRUFBSUMsWUFBYUQsSUFBSSxDQUdoQyxHQUYwQmIsYUFBYWEsR0FBRy9CLGNBQWMsNEJBQTRCOEIsSUFFNURELEVBQVcsQ0FDL0JOLEVBQVFRLEVBQ1IsUUFJSSxFQUFUUixHQUNDTCxhQUFhZSxPQUFPVixFQUFPLElBSW5DSixtQkNoQ0EsSUFBTWUsZUFBaUJuQyxTQUFTQyxjQUFjLG1CQUV4Q21DLFlBQWMsV0FDaEIsSUFBTUMsRUFBaUJyQyxTQUFTcUIsaUJBQWlCLG9EQUV0QixFQUF4QmdCLEVBQWVDLFNBQ2RELEVBQWVmLFFBQVEsU0FBQ0MsR0FDcEJNLHVCQUF1Qk4sRUFBS2dCLGVBQzVCaEIsRUFBS2dCLGNBQWMvQixXQUd2QmdDLGVBQ0FDLGNBQ0FDLGdCQUtSUCxlQUFlekIsaUJBQWlCLFFBQVMwQixhQ2xCekMsSUFBTU8sU0FBVzNDLFNBQVNDLGNBQWMsYUFFbEN5QyxZQUFjLFdBQ0YxQyxTQUFTcUIsaUJBQWlCLG1CQUVsQ0MsUUFBUSxTQUFTQyxHQUNuQkEsRUFBS2YsV0FHVFcsYUFBYUcsUUFBUSxTQUFTQyxHQUMxQm9CLFNBQVNDLFlBQVlyQixFQUFLRSxXQUFVLE9DVnRDb0IsTUFBUTdDLFNBQVNDLGNBQWMscUJBQ2pDNkMsYUFBZSxHQUViQyxjQUFnQixTQUFTQyxHQUMzQixJQUFNQyxFQUFZQyxLQUFLQyxNQUFNQyxjQUN2QkMsRUFBa0JILEtBQUtDLE1BQU1iLE9BRW5DLEdBQWlCLElBQWRZLEtBQUtDLE1BQ0osT0FBT1QsY0FHWCxHQUF5QixFQUF0QnZCLGFBQWFtQixPQUFXLENBQ3ZCLEtBQU1LLFNBQVNXLDRCQUE0QkMsZUFDdkNaLFNBQVNhLFlBQVliLFNBQVNXLGtCQVlULEdBTHpCUixjQUpBQSxhQUFlM0IsYUFBYXNDLElBQUksU0FBU2xDLEdBQ3JDLE9BQU9BLEVBQUtFLFdBQVUsTUFHRWlDLE9BQU8sU0FBU25DLEdBRXhDLE9BRHdCQSxFQUFLdEIsY0FBYyx3QkFDcEJpQixZQUFZa0MsY0FBY08sU0FBU1YsTUFHOUNYLFFBQ1pRLGFBQWF4QixRQUFRLFNBQVNDLEdBTTFCLElBTEEsSUFBTXFDLEVBQWtCckMsRUFBS3RCLGNBQWMsd0JBQ3JDNEQsRUFBV0QsRUFBZ0IxQyxZQUMzQjRDLEVBQWlCRixFQUFnQjFDLFlBQVlvQixPQUMvQ3lCLEVBQWUsR0FFWC9CLEVBQUksRUFBR0EsRUFBSThCLEVBQWdCOUIsSUFDNUI2QixFQUFTRyxVQUFVaEMsRUFBR0EsRUFBSXFCLEdBQWlCRCxlQUFpQkgsR0FBZ0MsRUFBbEJJLEdBQ3pFVSxHQUFnQiw2QkFBK0JGLEVBQVNHLFVBQVVoQyxFQUFHQSxFQUFJcUIsR0FBbUIsVUFDNUZyQixHQUFLcUIsRUFBa0IsR0FHdkJVLEdBQWdCRixFQUFTN0IsR0FJakM0QixFQUFnQjFDLFlBQWM2QyxFQUM5QnBCLFNBQVNDLFlBQVlyQixPQU1yQ3NCLE1BQU1uQyxpQkFBaUIsUUFBU3FDLGVDakRoQyxJQUFNZCxVQUFZLFdBQ2QsT0FBT2QsYUFBYW1CLFFDRGxCRyxZQUFjLFdBQ2hCLElBQU13QixFQUFRakUsU0FBU3FCLGlCQUFpQixtQkFFdEIsRUFBZjRDLEVBQU0zQixTQUNMMkIsRUFBTTNDLFFBQVEsU0FBQ0MsRUFBTUMsR0FDakIsSUFBTTBDLEVBQVEzQyxFQUFLdEIsY0FBYyx3QkFDM0I0QyxFQUFRdEIsRUFBS3RCLGNBQWMsNEJBQ2pDaUUsRUFBTUMsUUFBVSxTQUFXM0MsRUFBUSxHQUNuQ3FCLEVBQU1kLEdBQUssU0FBV1AsRUFBUSxLQUdsQ0wsYUFBYUcsUUFBUSxTQUFDQyxFQUFNQyxHQUN4QixJQUFNMEMsRUFBUTNDLEVBQUt0QixjQUFjLHdCQUMzQjRDLEVBQVF0QixFQUFLdEIsY0FBYyw0QkFDakNpRSxFQUFNQyxRQUFVLFNBQVczQyxFQUFRLEdBQ25DcUIsRUFBTWQsR0FBSyxTQUFXUCxFQUFRLE9DZnBDNEMsWUFBY3BFLFNBQVNDLGNBQWMsNEJBQ3JDb0UsU0FBV3JFLFNBQVNDLGNBQWMsYUFFbENxRSxXQUFhLFNBQUNDLEdBQ2hCLElBQU01QyxFQUFPM0IsU0FBU3dFLGNBQWMsTUFDcEM3QyxFQUFLOEMsVUFBWSxpQkFFakIsSUFBTVAsRUFBUWxFLFNBQVN3RSxjQUFjLFNBQ3JDTixFQUFNQyxRQUFVLFNBQVdsQyxZQUFjLEdBQ3pDaUMsRUFBTU8sVUFBWSxzQkFFbEIsSUFBTUMsRUFBZTFFLFNBQVN3RSxjQUFjLFNBQzVDRSxFQUFhQyxLQUFPLFdBQ3BCRCxFQUFhRCxVQUFZLDBCQUN6QkMsRUFBYTNDLEdBQUssU0FBV0UsWUFBYyxHQUMzQ3lDLEVBQWFoRSxpQkFBaUIsU0FBVWtFLG9CQUV4QyxJQUFNZixFQUFXN0QsU0FBU3dFLGNBQWMsUUFDeENYLEVBQVNZLFVBQVksc0JBQ3JCWixFQUFTM0MsWUFBY3FELEVBRXZCLElBQU1NLEVBQWU3RSxTQUFTd0UsY0FBYyxTQUM1Q0ssRUFBYUYsS0FBTyxXQUNwQkUsRUFBYUosVUFBWSwwQkFFekIsSUFBTUssRUFBc0I5RSxTQUFTd0UsY0FBYyxPQVNuRCxPQVJBTSxFQUFvQkwsVUFBWSxvQ0FFaEM5QyxFQUFLaUIsWUFBWXNCLEdBQ2pCdkMsRUFBS2lCLFlBQVk4QixHQUNqQi9DLEVBQUtpQixZQUFZaUIsR0FDakJsQyxFQUFLaUIsWUFBWWlDLEdBQ2pCbEQsRUFBS2lCLFlBQVlrQyxHQUVWbkQsR0FHTG9ELFFBQVUsV0FDWi9CLE1BQU1nQyxpQkFDTixJQUFNbkMsRUFBUUcsTUFBTWlDLE9BQU9oRixjQUFjLHVCQUN6QyxHQUFtQixLQUFoQjRDLEVBQU1NLE1BQVQsQ0FDQSxJQUFNeEIsRUFBTzJDLFdBQVd6QixFQUFNTSxPQUU5Qk4sRUFBTU0sTUFBUSxHQUNkWCxlQUNBZCxrQkFBa0JDLEdBQ2xCZSxnQkFHSjBCLFlBQVkxRCxpQkFBaUIsU0FBVXFFLFNDakR2QyxJQUFNRyxNQUFRbEYsU0FBU0MsY0FBYyxtQ0FDL0JrRixxQkFBdUJuRixTQUFTQyxjQUFjLDhCQUM5Q21GLHFCQUF1QnBGLFNBQVNDLGNBQWMsNkJBRTlDdUMsYUFBZSxXQUNqQixJQUFNUCxFQUFZakMsU0FBU3FCLGlCQUFpQixtQkFBbUJpQixPQUN6RCtDLEVBQWdCckYsU0FBU3FCLGlCQUFpQixvQ0FBb0NpQixPQUM5RWdELEVBQXNCRCxFQUFnQnBELEVBQVksSUFDeERrRCxxQkFBcUJqRSxZQUFjbUUsRUFDbkNELHFCQUFxQmxFLFlBQWNlLEVBRy9CaUQsTUFBTWxFLE1BQU11RSxXQURidEQsR0FBYSxFQUNaLDhFQUdBLGlEQUFBdUQsT0FBMEVGLEVBQTFFLGVBQUFFLE9BQTBHRixFQUExRyxzZUFLUjlDLGVDcEJBLElBQU1pRCxXQUFVQyxtQkFBTzFGLFNBQVNxQixpQkFBaUIsNkJBRTNDdUQsbUJBQXFCLFdBQ3ZCcEMsZ0JBR0ppRCxXQUFXbkUsUUFBUSxTQUFBcUUsR0FDZkEsRUFBUWpGLGlCQUFpQixTQUFVa0Usc0JDUHZDLElBQU1nQixZQUFjNUYsU0FBU0MsY0FBYywyQkFFM0MsU0FBUzRGLFdBQVdDLEdBQ2hCLElBY01DLEVBQU1ELEVBQUtFLFVBQ1hDLEVBQWFILEVBQUtJLFdBR3hCLE1BbEJpQixDQUNiLFlBQ0EsZUFBZ0IsU0FDaEIsUUFBUyxXQUNULFNBQVUsVUFZR0osRUFBS0ssVUFFTyxJQUFNSixFQUFNLElBWHRCLENBQ2pCLFdBQVksT0FBUSxRQUNwQixXQUFZLE9BQVEsVUFBVyxRQUMvQixXQUFZLGFBQWMsZUFDMUIsWUFBYSxXQU8yQ0UsR0FHOURMLFlBQVkxRSxZQUFjMkUsV0FBVyxJQUFJTyxNQUV6Q0MsWUFBWSxXQUNSVCxZQUFZMUUsWUFBYzJFLFdBQVcsSUFBSU8sT0FDMUMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIiwiY29uc3QgYnRuRG9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvbGlzdF9fZG9uZScpO1xyXG5jb25zdCBiaWNlcHNSaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvbGlzdF9fZG9uZS1yaWdodC1iaWNlcHMnKTtcclxuY29uc3QgYmljZXBzTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvbGlzdF9fZG9uZS1sZWZ0LWJpY2VwcycpO1xyXG5cclxuY29uc3QgbW91c2VPdmVyQW5pbWF0aW9uID0gKGUpID0+e1xyXG4gICAgYmljZXBzUmlnaHQuY2xhc3NMaXN0LmFkZCgnYmljZXBzLXJpZ2h0LW92ZXInKTtcclxuICAgIGJpY2Vwc0xlZnQuY2xhc3NMaXN0LmFkZCgnYmljZXBzLWxlZnQtb3ZlcicpO1xyXG4gICAgYmljZXBzUmlnaHQuY2xhc3NMaXN0LnJlbW92ZSgnYmljZXBzLXJpZ2h0LW91dCcpO1xyXG4gICAgYmljZXBzTGVmdC5jbGFzc0xpc3QucmVtb3ZlKCdiaWNlcHMtbGVmdC1vdXQnKTtcclxufVxyXG5cclxuY29uc3QgbW91c2VPdXRBbmltYXRpb24gPSAoZSkgPT57XHJcbiAgICBiaWNlcHNSaWdodC5jbGFzc0xpc3QucmVtb3ZlKCdiaWNlcHMtcmlnaHQtb3ZlcicpO1xyXG4gICAgYmljZXBzTGVmdC5jbGFzc0xpc3QucmVtb3ZlKCdiaWNlcHMtbGVmdC1vdmVyJyk7XHJcbiAgICBiaWNlcHNSaWdodC5jbGFzc0xpc3QuYWRkKCdiaWNlcHMtcmlnaHQtb3V0Jyk7XHJcbiAgICBiaWNlcHNMZWZ0LmNsYXNzTGlzdC5hZGQoJ2JpY2Vwcy1sZWZ0LW91dCcpO1xyXG59XHJcblxyXG5idG5Eb25lLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIG1vdXNlT3ZlckFuaW1hdGlvbik7XHJcbmJ0bkRvbmUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBtb3VzZU91dEFuaW1hdGlvbik7IiwiY29uc3QgYnRuU2hvd01vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb2xpc3RfX3Nob3ctbW9yZScpO1xyXG5jb25zdCB0b2RvbGlzdFBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9saXN0Jyk7XHJcblxyXG5cclxuY29uc3Qgc2hvd01vcmUgPSAoKSA9PntcclxuICAgIGJ0blNob3dNb3JlLnRvZ2dsZUF0dHJpYnV0ZShcImlzU2hvd2luZ1wiKTtcclxuICAgIGlmKGJ0blNob3dNb3JlLmhhc0F0dHJpYnV0ZShcImlzU2hvd2luZ1wiKSA9PSB0cnVlKXtcclxuICAgICAgICB0b2RvbGlzdFBhbmVsLnN0eWxlLm1heEhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGJ0blNob3dNb3JlLnRleHRDb250ZW50ID0gXCJwb2theiBtbmllalwiO1xyXG4gICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgdG9kb2xpc3RQYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSBcIjQ1NXB4XCI7XHJcbiAgICAgICAgYnRuU2hvd01vcmUudGV4dENvbnRlbnQgPSBcInBva2F6IHdpZWNlalwiO1xyXG4gICAgICAgIC8vZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBcIjEwMHZoXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG59XHJcblxyXG5idG5TaG93TW9yZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dNb3JlKTsiLCJsZXQgY3VycmVudFRhc2tzID0gW107XHJcblxyXG5jb25zdCBsb2FkQ3VycmVudFRhc2tzID0gZnVuY3Rpb24oKXtcclxuICAgIGNvbnN0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2RvbGlzdF9fdGFza1wiKTtcclxuXHJcbiAgICB0YXNrcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KXtcclxuICAgICAgICBjdXJyZW50VGFza3NbaW5kZXhdID0gaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuY29uc3QgYWRkVG9DdXJyZW50VGFza3MgPSBmdW5jdGlvbih0YXNrKXtcclxuICAgIGN1cnJlbnRUYXNrcy5wdXNoKHRhc2suY2xvbmVOb2RlKHRydWUpKTtcclxufVxyXG5cclxuY29uc3QgcmVtb3ZlRnJvbUN1cnJlbnRUYXNrcyA9IGZ1bmN0aW9uKHRhc2spe1xyXG4gICAgY29uc3QgdGFza051bWJlciA9IHRhc2sucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fY2hlY2tib3gtZG9uZVwiKS5pZDtcclxuICAgIGxldCBpbmRleCA9IC0xO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0YXNrQ291bnQoKTsgaSsrKXtcclxuICAgICAgICBjb25zdCBjdXJyZW50VGFza051bWJlciA9IGN1cnJlbnRUYXNrc1tpXS5xdWVyeVNlbGVjdG9yKFwiLnRvZG9saXN0X19jaGVja2JveC1kb25lXCIpLmlkO1xyXG5cclxuICAgICAgICBpZihjdXJyZW50VGFza051bWJlciA9PSB0YXNrTnVtYmVyKXtcclxuICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICBicmVhazsgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKGluZGV4ID4gLTEpe1xyXG4gICAgICAgIGN1cnJlbnRUYXNrcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5sb2FkQ3VycmVudFRhc2tzKCk7XHJcblxyXG4iLCJjb25zdCBkZWxldGVUYXNrc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RfX2RvbmVcIik7XHJcblxyXG5jb25zdCBkZWxldGVUYXNrcyA9ICgpID0+e1xyXG4gICAgY29uc3QgYWxsVGFza0NoZWNrZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvZG9saXN0X190YXNrIC50b2RvbGlzdF9fY2hlY2tib3gtZG9uZTpjaGVja2VkXCIpO1xyXG5cclxuICAgIGlmKGFsbFRhc2tDaGVja2VkLmxlbmd0aCA+IDApe1xyXG4gICAgICAgIGFsbFRhc2tDaGVja2VkLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbUN1cnJlbnRUYXNrcyhpdGVtLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICBpdGVtLnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY2hhcnRSZWZyZXNoKCk7XHJcbiAgICAgICAgcmVhbG9hZFRhZ3MoKTtcclxuICAgICAgICByZWxvYWRUYXNrcygpO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZGVsZXRlVGFza3NCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlbGV0ZVRhc2tzKTtcclxuXHJcbiIsImNvbnN0IHRvZG9saXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdFwiKTtcclxuXHJcbmNvbnN0IHJlbG9hZFRhc2tzID0gZnVuY3Rpb24oKXtcclxuICAgIGNvbnN0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2RvbGlzdF9fdGFza1wiKTtcclxuXHJcbiAgICB0YXNrcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgIGl0ZW0ucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjdXJyZW50VGFza3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICB0b2RvbGlzdC5hcHBlbmRDaGlsZChpdGVtLmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICB9KTtcclxufSIsImNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fc2VhcmNoXCIpO1xyXG5sZXQgZmlsdHJlZFRhc2tzID0gW107XHJcblxyXG5jb25zdCBzZWFyY2hpbmdUYXNrID0gZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgY29uc3QgaW5wdXRUZXh0ID0gdGhpcy52YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3QgaW5wdXRUZXh0TGVuZ3RoID0gdGhpcy52YWx1ZS5sZW5ndGg7XHJcblxyXG4gICAgaWYodGhpcy52YWx1ZSA9PSBcIlwiKXtcclxuICAgICAgICByZXR1cm4gcmVsb2FkVGFza3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihjdXJyZW50VGFza3MubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgd2hpbGUodG9kb2xpc3QubGFzdEVsZW1lbnRDaGlsZCBpbnN0YW5jZW9mIEhUTUxMSUVsZW1lbnQpe1xyXG4gICAgICAgICAgICB0b2RvbGlzdC5yZW1vdmVDaGlsZCh0b2RvbGlzdC5sYXN0RWxlbWVudENoaWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZpbHRyZWRUYXNrcyA9IGN1cnJlbnRUYXNrcy5tYXAoZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZmlsdHJlZFRhc2tzID0gZmlsdHJlZFRhc2tzLmZpbHRlcihmdW5jdGlvbihpdGVtKXsgXHJcbiAgICAgICAgICAgIGNvbnN0IHRhc2tUZXh0RWxlbWVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fdGFzay10ZXh0XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFza1RleHRFbGVtZW50LnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoaW5wdXRUZXh0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYoZmlsdHJlZFRhc2tzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBmaWx0cmVkVGFza3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUZXh0RWxlbWVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fdGFzay10ZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1RleHQgPSB0YXNrVGV4dEVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrVGV4dExlbmd0aCA9IHRhc2tUZXh0RWxlbWVudC50ZXh0Q29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFza1RleHRIdG1sID0gXCJcIjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRhc2tUZXh0TGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRhc2tUZXh0LnN1YnN0cmluZyhpLCBpICsgaW5wdXRUZXh0TGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09IGlucHV0VGV4dCAmJiAgaW5wdXRUZXh0TGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUZXh0SHRtbCArPSBcIjxzcGFuIGNsYXNzPSd0ZXh0LWFjdGl2ZSc+XCIgKyB0YXNrVGV4dC5zdWJzdHJpbmcoaSwgaSArIGlucHV0VGV4dExlbmd0aCkgKyBcIjwvc3Bhbj5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSArPSBpbnB1dFRleHRMZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrVGV4dEh0bWwgKz0gdGFza1RleHRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhc2tUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IHRhc2tUZXh0SHRtbDtcclxuICAgICAgICAgICAgICAgIHRvZG9saXN0LmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBzZWFyY2hpbmdUYXNrKTsiLCJjb25zdCB0YXNrQ291bnQgPSAoKSA9PntcclxuICAgIHJldHVybiBjdXJyZW50VGFza3MubGVuZ3RoO1xyXG59IiwiY29uc3QgcmVhbG9hZFRhZ3MgPSAoKSA9PntcclxuICAgIGNvbnN0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2RvbGlzdF9fdGFza1wiKTtcclxuXHJcbiAgICBpZih0YXNrcy5sZW5ndGggPiAwKXtcclxuICAgICAgICB0YXNrcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF90YXNrLWxhYmVsXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdF9fY2hlY2tib3gtZG9uZVwiKTtcclxuICAgICAgICAgICAgbGFiZWwuaHRtbEZvciA9IFwidGFzay1cIiArIChpbmRleCArIDEpO1xyXG4gICAgICAgICAgICBpbnB1dC5pZCA9IFwidGFzay1cIiArIChpbmRleCArIDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjdXJyZW50VGFza3MuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RfdGFzay1sYWJlbFwiKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RfX2NoZWNrYm94LWRvbmVcIik7XHJcbiAgICAgICAgICAgIGxhYmVsLmh0bWxGb3IgPSBcInRhc2stXCIgKyAoaW5kZXggKyAxKTtcclxuICAgICAgICAgICAgaW5wdXQuaWQgPSBcInRhc2stXCIgKyAoaW5kZXggKyAxKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImNvbnN0IGZvcm1BZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9saXN0X19mb3JtLWFkZC10YXNrJyk7XHJcbmNvbnN0IHRvZG9MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9saXN0Jyk7XHJcblxyXG5jb25zdCBjcmVhdGVUYXNrID0gKGlucHV0VmFsdWUpID0+e1xyXG4gICAgY29uc3QgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICB0YXNrLmNsYXNzTmFtZSA9IFwidG9kb2xpc3RfX3Rhc2tcIjtcclxuXHJcbiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICBsYWJlbC5odG1sRm9yID0gXCJ0YXNrLVwiICsgKHRhc2tDb3VudCgpICsgMSk7XHJcbiAgICBsYWJlbC5jbGFzc05hbWUgPSBcInRvZG9saXN0X3Rhc2stbGFiZWxcIjtcclxuXHJcbiAgICBjb25zdCBjaGVja2JveERvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgY2hlY2tib3hEb25lLnR5cGUgPSBcImNoZWNrYm94XCI7XHJcbiAgICBjaGVja2JveERvbmUuY2xhc3NOYW1lID0gXCJ0b2RvbGlzdF9fY2hlY2tib3gtZG9uZVwiO1xyXG4gICAgY2hlY2tib3hEb25lLmlkID0gXCJ0YXNrLVwiICsgKHRhc2tDb3VudCgpICsgMSk7XHJcbiAgICBjaGVja2JveERvbmUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjaGVjYm94Q2hhbmdlRXZlbnQpO1xyXG5cclxuICAgIGNvbnN0IHRhc2tUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgdGFza1RleHQuY2xhc3NOYW1lID0gXCJ0b2RvbGlzdF9fdGFzay10ZXh0XCI7XHJcbiAgICB0YXNrVGV4dC50ZXh0Q29udGVudCA9IGlucHV0VmFsdWU7XHJcblxyXG4gICAgY29uc3QgY2hlY2tib3hTdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgIGNoZWNrYm94U3Rhci50eXBlID0gXCJjaGVja2JveFwiO1xyXG4gICAgY2hlY2tib3hTdGFyLmNsYXNzTmFtZSA9IFwidG9kb2xpc3RfX2NoZWNrYm94LXN0YXJcIjtcclxuXHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kQW5pbWF0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBiYWNrZ3JvdW5kQW5pbWF0aW9uLmNsYXNzTmFtZSA9IFwiY2hlY2JveC1kb25lX2JhY2tncm91bmRfYW5pbWF0aW9uXCI7XHJcblxyXG4gICAgdGFzay5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICB0YXNrLmFwcGVuZENoaWxkKGNoZWNrYm94RG9uZSk7XHJcbiAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tUZXh0KTtcclxuICAgIHRhc2suYXBwZW5kQ2hpbGQoY2hlY2tib3hTdGFyKTtcclxuICAgIHRhc2suYXBwZW5kQ2hpbGQoYmFja2dyb3VuZEFuaW1hdGlvbik7XHJcblxyXG4gICAgcmV0dXJuIHRhc2s7XHJcbn07XHJcblxyXG5jb25zdCBhZGRUYXNrID0gKCkgPT57XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcignLnRvZG9saXN0X19hZGQtdGFzaycpO1xyXG4gICAgaWYoaW5wdXQudmFsdWUgPT09IFwiXCIpeyByZXR1cm47IH07XHJcbiAgICBjb25zdCB0YXNrID0gY3JlYXRlVGFzayhpbnB1dC52YWx1ZSk7XHJcbiAgICAvL3RvZG9MaXN0LmFwcGVuZENoaWxkKHRhc2spO1xyXG4gICAgaW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgY2hhcnRSZWZyZXNoKCk7XHJcbiAgICBhZGRUb0N1cnJlbnRUYXNrcyh0YXNrKTtcclxuICAgIHJlbG9hZFRhc2tzKCk7XHJcbn07XHJcblxyXG5mb3JtQWRkVGFzay5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhZGRUYXNrKTsiLCJjb25zdCBjaGFydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvbGlzdF9fbGluZS1kb25lLXBlcmNlbnRhZ2UnKTtcclxuY29uc3QgdGFza0RvbmVOdW1lckRpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb2xpc3RfX2NvdW50LWRvbmUtdGFzaycpOyBcclxuY29uc3QgYWxsVGFza051bWJlckRpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb2xpc3RfX2NvdW50LWFsbC10YXNrJyk7XHJcblxyXG5jb25zdCBjaGFydFJlZnJlc2ggPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0YXNrQ291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kb2xpc3RfX3Rhc2snKS5sZW5ndGg7XHJcbiAgICBjb25zdCB0YXNrRG9uZUNvdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG9saXN0X19jaGVja2JveC1kb25lOmNoZWNrZWQnKS5sZW5ndGg7XHJcbiAgICBjb25zdCB0YXNrRG9uZVBlcmNlbnRhZ2UgPSAgdGFza0RvbmVDb3VudCAvIHRhc2tDb3VudCAqIDEwMDtcclxuICAgIHRhc2tEb25lTnVtZXJEaXNwbGF5LnRleHRDb250ZW50ID0gdGFza0RvbmVDb3VudDtcclxuICAgIGFsbFRhc2tOdW1iZXJEaXNwbGF5LnRleHRDb250ZW50ID0gdGFza0NvdW50O1xyXG5cclxuICAgIGlmKHRhc2tDb3VudCA8PSAwKXtcclxuICAgICAgICBjaGFydC5zdHlsZS5iYWNrZ3JvdW5kID0gYGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzY4ZDM5MSAwJSwgIzY4ZDM5MSAwJSwgI2RhZGFkYSAwJSwgI2RhZGFkYSAxMDAlKWA7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIGNoYXJ0LnN0eWxlLmJhY2tncm91bmQgPSBgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjNjhkMzkxIDAlLCAjNjhkMzkxICR7dGFza0RvbmVQZXJjZW50YWdlfSUsICNkYWRhZGEgJHt0YXNrRG9uZVBlcmNlbnRhZ2V9JSwgI2RhZGFkYSAxMDAlKWA7XHJcbiAgICB9XHJcbiAgICBcclxufTtcclxuXHJcbmNoYXJ0UmVmcmVzaCgpOyIsImNvbnN0IGNoZWNrYm94ZXMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG9saXN0X19jaGVja2JveC1kb25lJyldO1xyXG5cclxuY29uc3QgY2hlY2JveENoYW5nZUV2ZW50ID0gKCkgPT57XHJcbiAgICBjaGFydFJlZnJlc2goKTtcclxufTtcclxuXHJcbmNoZWNrYm94ZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjaGVjYm94Q2hhbmdlRXZlbnQpO1xyXG59KTtcclxuIiwiY29uc3QgZGF0ZURpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb2xpc3RfX2N1cnJlbnQtdGltZScpO1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XHJcbiAgICBjb25zdCBkYXlOYW1lcyA9IFtcclxuICAgICAgICBcIk5pZWR6aWVsYVwiLFxyXG4gICAgICAgIFwiUG9uaWVkemlhxYJla1wiLCBcIld0b3Jla1wiLFxyXG4gICAgICAgIFwixZpyb2RhXCIsIFwiQ3p3YXJ0ZWtcIixcclxuICAgICAgICBcIlBpxIV0ZWtcIiwgXCJTb2JvdGFcIlxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBtb250aE5hbWVzID0gW1xyXG4gICAgICBcIlN0eWN6bmlhXCIsIFwiTHV0eVwiLCBcIk1hcmNhXCIsXHJcbiAgICAgIFwiS3dpZXRuaWFcIiwgXCJNYWphXCIsIFwiQ3plcndjYVwiLCBcIkxpcGNhXCIsXHJcbiAgICAgIFwiU2llcnBuaWFcIiwgXCJXcnplc2llbmlhXCIsIFwiUGHFumR6aWVybmlrYVwiLFxyXG4gICAgICBcIkxpc3RvcGFkYVwiLCBcIkdydWRuaWFcIlxyXG4gICAgXTtcclxuICBcclxuICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgY29uc3QgbW9udGhJbmRleCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgIGNvbnN0IGRheUluZGV4ID0gZGF0ZS5nZXREYXkoKTtcclxuICBcclxuICAgIHJldHVybiAgZGF5TmFtZXNbZGF5SW5kZXhdICsgXCIgXCIgKyBkYXkgKyBcIiBcIiArIG1vbnRoTmFtZXNbbW9udGhJbmRleF07XHJcbn1cclxuXHJcbmRhdGVEaXNwbGF5LnRleHRDb250ZW50ID0gZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKTtcclxuXHJcbnNldEludGVydmFsKGZ1bmN0aW9uKCl7XHJcbiAgICBkYXRlRGlzcGxheS50ZXh0Q29udGVudCA9IGZvcm1hdERhdGUobmV3IERhdGUoKSk7XHJcbn0sIDYwMDAwKTtcclxuXHJcbiJdfQ==
